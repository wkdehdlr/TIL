> 얼마전 우아한테크세미나에서 진행한 `지속가능한 SW 개발을 위한 코드리뷰`요약본 입니다.<br>
> [풀영상](https://www.youtube.com/watch?v=ssDMIcPBqUE&t=5490s) :smile:

## :black_small_square: 코드리뷰의 목적
### :white_small_square: 주목적
- 품질 문제 검수(버그, 장애)
### :white_small_square: 더 나은 코드 품질
- 아키텍처 속성 개선을 위한 코드 개선(`향후 변경 비용 개선`)
### :white_small_square: 학습 및 지식 전달
- 공유를 통한 역량 증대 및 성장
    - 대개의 경우 리뷰어들도 리뷰 과정에서 지식을 얻게 됨(하드스킬, 소프트스킬)
- 동기부여
### :white_small_square: 상호 책임감 증대
- 집단 코드 오너십 및 결속 증대
- 내가 하고 있는 일에 관심을 가져주는 것
- 팀에서 일어나는 일 공유
### :white_small_square: 설계 개선 제안
### :white_small_square: 개발 문화 개선
<br><br><br>
## :black_small_square: 왜 코드 리뷰가 어려운가
### :white_small_square: 저자
- 본인 생각에 멋지다고 생각하는 PR을 보냄
### :white_small_square: 리뷰어
- 왜 멋지지 않은지에 대한 장황한 이유를 작성
### :white_small_square: 코드 토의를 개인적 공격으로 받아들이면 물거품
- `코드에 대한 비판을 자신에 대한 비판으로 이해`
### :white_small_square: 생각을 글로 전달하는 것에 대한 어려움
- 오해의 위험이 큼(음성, 톤, 표정의 부재)
### :white_small_square: 피드백을 조심스럽게 표현하는 것이 더 중요
<br><br><br>
## :black_small_square: 효율적인 PR 방법
### :white_small_square: 스타일 가이드를 통해 스타일 논쟁을 해소
- 스타일에 대한 논쟁은 리뷰에서 시간 낭비
### :white_small_square: PR 올릴 때 주석 달기
- 리뷰어들은 위한 설명을 코멘트로 남겨서 `리뷰어들의 시간을 절약`할 수 있게 하라
### :white_small_square: 모두를 포함하라
- `많은 사람들이 볼수록 버그를 더 잘 찾아낼 수 있다`
- 많은 사람들이 본다는 것을 알면 사람들은 대개 `더 잘 하려는 경향`이 있다(코드/PR 작성)
### :white_small_square: 의미있는 커밋으로 분리
### :white_small_square: PR에 포함된 `변경이 적도록`노력
- `반나절 정도`작업한 양 정도
### :white_small_square: 고수준에서 저수준으로
- 초기 라운드에서는 `고수준 피드백으로 제한`
    - 버그, 장애, 성능, 보안 등
- 고수준의 피드백이 처리된 후에 `저수준 이슈`를 처리
    - (선택적) 설계 개선
    - 네이밍 변경, 주석 등
### :white_small_square: 예제 코드 제공에 관대
- 너무 긴 예제는 관대한 것이 아니라 `억압적`
### :white_small_square: 리뷰의 범위를 존중
- 자주 보이는 `Anti-Pattern`
  - `PR 근처의 코드`를 보고 저자에게 수정 요청
- `Rule of thumb`
  - PR에 포함되지 않은 라인은 리뷰 범위가 아님
- `예외` : PR이 둘러싼 코드에 영향을 미칠 때
### :white_small_square: 한 두 등급만 코드 레벨을 올리는 것을 목표
- D 등급의 PR을 저자가 C나 B 등급을 받도록 도와라
- `완전하지는 않아도 충분히 좋은 코드`가 되도록
### :white_small_square: 태그를 활용
- [Nit]
    - `고치면 좋지만 아니어도 그만`을 의미
    - 리뷰어는 `항상 더 개선할 수 있는 의견을 자유롭게 남길 수 있어야`함
    - 중요치 않다면 `Nit` 태그를 남겨서 저자가 무시할 수 있도록 할 수 있음
    - 교육적인 목적, 지속적으로 기술을 연마하는 것을 돕는 목적
    - 예 Nit ) null 대신 Optional을 쓰면 어떨까요?, OCP 준수를 위해 Strategy 도입은 어떨까요? 등
<br><br><br>
## :black_small_square: 피드백 방법
### :white_small_square: 피드백은 명령이 아니라 요청으로
- `일상에서 동료에게 명령하지 않음`
- 하지만 리뷰에서는 강압적인 명령이 종종 발견됨
### :white_small_square: 절대 `너`라고 하지 마라
- 리뷰의 핵심
    - `무엇이 코드를 나아지게 하는가`
    - 누가 그런 아이디어(잘못)를 냈는지가 아님
- 저자의 방어 유발을 최소화하는 방법으로 피드백
    - `비판의 대상은 코드`. 저자가 아님
- 예시) ~하는 것을 제안합니다. ~하는게 어떨까요? 오픈커뮤니케이션
### :white_small_square: 건설적인 피드백
- 코드리뷰는 `팀의 생산성을 높이는 것`이지 경쟁유발이 아님
- 코드 리뷰를 `학습의 과정`으로 인지하면 전체적인 프로젝트 성공에 기여함
- `건설적인 피드백`은 개발자들이 그들의 실수에서 배우고 역량을 증대하도록 `동기부여`함
### :white_small_square: 진정한 칭찬
- 대부분의 리뷰어가 `잘못된 부분에만 집중`
    - 하지만 리뷰는 긍정적 행위 강화를 위한 값진 기회
- PR에서 좋은 변경이 있을 때
    - 오 이런 API가 있나요. 정말 유용해요
    - 정말 좋은 해결책이네요.
    - 함수를 분리한 것은 좋은 생각이에요. 훨씬 단순해졌어요
- 저자가 `주니어 혹은 신규 입사자`라면 리뷰에 매우 `민감`하고 `방어적`일 수 있음
- `진심 어린 칭찬`은 리뷰어가 잔인한 감시자가 아니라 `도와주려는 팀동료`라는 것을 보여서 이런 긴장감을 낮춤
### :white_small_square: 의견이 아니라 원칙에 기반
- 저자에게 의견을 줄 때는
    - `제안하는 변경`과 `변경의 이유`를 모두 설명하라
    - 예) 이 클래스를 2개로 분리해야 해요(x)<br>
    -> 지금 이 클래스는 파일 다운로드와 파싱, `2가지 책임`을 가지고 있어요.<br>
      다운로드와 파서 2개의 클래스로 분리하여 `SRP를 준수`하는 것이 어떨까요?
